{% extends "layouts/report.html" %}
{% set title = "Teacher’s personal details" %}
{% set gridClass = "govuk-grid-column-full" %}

{% block beforeForm %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-xl">About the teacher</span>
        {{ title }}
      </h1>
    </div>
  </div>

  {{ xGovukSummaryCard({
    classes: "govuk-!-margin-bottom-9",
    titleText: "Personal details",
    rows: decorateRows([
      {
        key: 'Name',
        data: 'report.teacher-details.name',
        href: '/report/teacher/name'
      },
      {
        key: 'Previous name',
        data: 'report.teacher-details.previous-name',
        href: '/report/teacher/name',
        condition: {
          data: 'report.teacher-details.have-previous-name',
          value: 'Yes'
        }
      },
      {
        key: 'Date of birth',
        value: (d('report.teacher-details.date-of-birth') | isoDateFromDateInput | govukDate) if d('report.teacher-details.date-of-birth.day') else 'Not known',
        href: '/report/teacher/age',
        condition: {
          data: 'report.teacher-details.know-age',
          excludedValue: 'knows-age'
        }
      },
      {
        key: 'Approximate age',
        data: 'report.teacher-details.age',
        href: '/report/teacher/age',
        condition: {
          data: 'report.teacher-details.know-age',
          value: 'knows-age'
        }
      },
      {
        key: 'National Insurance number',
        value: 'Not known' if d('report.teacher-details.know-nino') == 'No' else d('report.teacher-details.nino'),
        href: '/report/teacher/nino'
      },
      {
        key: 'Teacher reference number (TRN)',
        value: 'Not known' if d('report.teacher-details.know-trn') == 'No' else d('report.teacher-details.trn'),
        href: '/report/teacher/trn'
      }
    ])
  }) }}
{% endblock %}

{% block form %}
  {{ govukRadios({
    fieldset: {
      legend: {
        classes: "govuk-fieldset__legend--m",
        text: "Have you completed this section?"
      }
    },
    items: [
      {
        text: "Yes, I’ve completed this section",
        value: "complete"
      },
      {
        text: "No, I’ll come back to it later",
        value: "incomplete"
      }
    ],
    decorate: 'report.teacher-details.section-completed',
    validate: {
      presence: {
        message: "Tell us if you have completed this section"
      }
    } if data.features.validation.on
  }) }}
{% endblock %}
